CREATE DB:

mysql -u root -p

CREATE DATABASE `_b7b8640a2d1b8b5c`;
CREATE USER '_b7b8640a2d1b8b5c'@'localhost' IDENTIFIED BY '0W9ixoW0V8YkDPDe';
GRANT ALL PRIVILEGES ON `_b7b8640a2d1b8b5c`.* TO '_b7b8640a2d1b8b5c'@'localhost';
FLUSH PRIVILEGES;
EXIT;

RESTORE DB:
mysql -u _b7b8640a2d1b8b5c -p0W9ixoW0V8YkDPDe _b7b8640a2d1b8b5c < sql.sql


UPDATE site_config.json
{
 "db_name": "_b7b8640a2d1b8b5c",
 "db_password": "0W9ixoW0V8YkDPDe",
 "db_type": "mariadb",
 "db_user": "_b7b8640a2d1b8b5c",
 "developer_mode": 1GRANT ALL 
}

IN BENCH DIR:
bench --site smartb-erpnext.dev clear-cache
bench --site smartb-erpnext.dev migrate --skip-failing --skip-search-index

CHECK CONSOLE:
bench --site smartb-erpnext.dev console
frappe.get_all('Patch Log', filters={'skipped': 1}, fields=['patch'])

IF ERROR:
frappe.db.sql("""
    ALTER TABLE `tabAccounting Dimension Filter` 
    ADD COLUMN `fieldname` varchar(140) DEFAULT NULL
""")

from frappe.modules.patch_handler import run_single
run_single('erpnext.patches.v15_0.update_fieldname_in_accounting_dimension_filter')
frappe.db.commit()
exit()
bench --site smartb-erpnext.dev clear-cache

bench --site smartb-erpnext.dev build-search-index
bench --site smartb-erpnext.dev migrate
bench --site smartb-erpnext.dev clear-cache
bench --site smartb-erpnext.dev clear-website-cache
bench restart
bench --site smartb-erpnext.dev doctor

ssh-keygen -t id_ed25519-C "local@mrmy.my"
vim id_ed25519.pub

cd ~/.ssh
vim config
Host digitalocean
        User root
        HostName 159.223.43.125
        IdentityFile ~/.ssh/id_ed25519
        Port 22

tar czf erpnext_local.tar.gz erpnext

scp digitalocean:/home/erpnext-user/bench/sites/smartb-erpnext.dev/private/backups/20251024_050037-smartb-erpnext_dev-* /home/erpnext/bench/sites/smartb-erpnext.dev/private/backups/
scp -r digitalocean:/home/erpnext-user/bench/apps/erpnext/erpnext/buying/doctype/purchase_order ~/erpnext/ERPNext/apps/erpnext/erpnext/buying/doctype/
scp -r digitalocean:/home/erpnext-user/bench/apps/erpnext/erpnext/buying/doctype/supplier ~/erpnext/ERPNext/apps/erpnext/erpnext/buying/doctype/
scp -r digitalocean:/home/erpnext-user/bench/apps/erpnext/erpnext/buying/doctype/customer_number_at_supplier ~/erpnext/ERPNext/apps/erpnext/erpnext/buying/doctype/


bench --site smartb-erpnext.dev reload-doc erpnext.buying doctype customer_number_at_supplier
tar czf erpnext_local.tar.gz erpnext

bench --site smartb-erpnext.dev migrate
bench --site smartb-erpnext.dev clear-cache
bench --site smartb-erpnext.dev clear-website-cache
bench restart

bench set-config -g server_script_enabled 1

http://192.168.0.100:8000
to access it from another system we have 
1. Allowed access to port 8000 in Windows Server (using Windows Defender Firewall Rules)
2. Added a proxy that forwards all traffic on port 8000 accessed by Server's IP to same port on WSL's IP


Check Size:
ssh digitalocean "du -sh --exclude='node_modules' --exclude='env' --exclude='venv' --exclude='.venv' --exclude='.npm' --exclude='.cache' --exclude='__pycache__' --exclude='*.pyc' --exclude='.nvm' --exclude='.git' --exclude='*.tar.gz' /home/erpnext-user/"


Download:
sudo rm -rf erpnext-user && mkdir erpnext-user && cd erpnext-user (or sudo rm -rf a.out backups/ bench/ package-lock.json package.json)

rsync -avh --info=progress2 --stats --exclude='node_modules' --exclude='env' --exclude='venv' --exclude='.venv' --exclude='.npm' --exclude='.cache' --exclude='__pycache__' --exclude='*.pyc' --exclude='.nvm' --exclude='*.tar.gz' digitalocean:/home/erpnext-user/bench/ .

After Download:
(optional)
nvm install 18.20.8
nvm use 18.20.8

cd bench
python3 -m venv env
source env/bin/activate
pip install -e apps/frappe
pip install -e apps/erpnext

MIGRATE DATABASE
find and replace all user references:
cd ~/erpnext-user
grep -r "/erpnext-user/" . --exclude-dir=node_modules --exclude-dir=.git --exclude-dir=env --exclude-dir=__pycache__ -l

bench setup requirements
bench build


python3 --version
node --version
npm --version
yarn --version
mysql --version
redis-server --version
git --version
bench --version

source ~/.nvm/nvm.sh


